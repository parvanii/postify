

generator client {
  provider = "prisma-client-js"
  
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id              String    @id @default(uuid())
  razorpayCustId  String?   @unique @map("razorpay_customer_id")
  email           String    @unique
  name            String?
  points          Int       @default(50)
  createdAt       DateTime  @default(now()) @map("created_at")

  subscriptions   Subscription[]
  contents        GeneratedContent[]
}

model Subscription {
  id                 String   @id @default(uuid())
  userId             String   @map("user_id")
  razorpaySubId      String   @map("razorpay_subscription_id")
  plan               String   @db.VarChar(50)
  status             String   @db.VarChar(50)
  currentPeriodStart DateTime @map("current_period_start")
  currentPeriodEnd   DateTime @map("current_period_end")
  cancelAtPeriodEnd  Boolean  @default(false) @map("cancel_at_period_end")

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model GeneratedContent {
  id          String   @id @default(uuid())
  userId      String   @map("user_id")
  content     String
  prompt      String
  contentType String   @db.VarChar(50) @map("content_type")
  createdAt   DateTime @default(now()) @map("created_at")

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}
